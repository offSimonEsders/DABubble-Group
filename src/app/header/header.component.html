<header>
    <div class="Mobilelogos">
        <img *ngIf="!this.chatService.swichPicture" class="logo" src="../../assets/img/daBubbleLogo.png" alt="Hier ist das Logo von DaBubble">
        <app-nav-head *ngIf="this.chatService.swichPicture" class="logo"></app-nav-head>
    </div>
    <div class="Destoplogos">
        <img class="logo" src="../../assets/img/daBubbleLogo.png" alt="Hier ist das Logo von DaBubble">
    </div>
    
    <div class="searchContainer">
        <div class="searchbar">
            <input id="searchInputField"
            class="input-field"
            type="text"
            placeholder="Code learning durchsuchen"
            (input)="onSearch($event)">
            <img src="../../assets/img/searchIcon.png" alt="Hier ist ein Lupen-Icon">    
        </div>
        <div class="searchResults" *ngIf="showResults">
            <div *ngIf="foundUsers.length > 0" >
                <h3>Users:</h3>
                <div *ngFor="let user of foundUsers" class="foundContent" (click)="openChat('chats', user ['accountId'])" >
                    <app-avatar [accountId]="user['id']" [hideStatus]="false"></app-avatar>
                    <span>{{user['name']}}</span>
                </div> 
            </div>
            <div *ngIf="foundChannels.length > 0" >
                <h3>Channels:</h3>
                <div *ngFor="let channel of foundChannels" class="foundContent" (click)="openChannel('channels', channel['id'])">
                    @if(channel) {
                        @switch (channel['publicStatus']) {
                        @case (true) {
                        <div class="svg-container">
                            <svg xmlns="http://www.w3.org/2000/svg" width="22" height="23" viewBox="0 0 22 23" fill="none">
                                <path
                                    d="M4.65649 23C4.23359 23 3.88859 22.8203 3.6215 22.4609C3.3544 22.1016 3.2765 21.7062 3.38779 21.275L4.32262 17.25H1.35119C0.906029 17.25 0.549902 17.0646 0.282807 16.6937C0.0157114 16.3219 -0.0621913 15.9083 0.0490984 15.4531C0.115872 15.1177 0.271678 14.8542 0.516515 14.6625C0.761352 14.4708 1.03958 14.375 1.35119 14.375H4.99036L6.32583 8.625H2.68666C2.2415 8.625 1.88538 8.43956 1.61828 8.06869C1.35119 7.69685 1.27328 7.28333 1.38457 6.82812C1.45135 6.49271 1.60715 6.22917 1.85199 6.0375C2.09683 5.84583 2.37505 5.75 2.68666 5.75H6.99357L8.09534 1.04219C8.16211 0.730729 8.30679 0.479166 8.52937 0.2875C8.75195 0.095833 9.01904 0 9.33066 0C9.75356 0 10.0986 0.179688 10.3656 0.539062C10.6327 0.898438 10.7106 1.29375 10.5994 1.725L9.66452 5.75H15.0064L16.1082 1.04219C16.175 0.730729 16.3196 0.479166 16.5422 0.2875C16.7648 0.095833 17.0319 0 17.3435 0C17.7664 0 18.1114 0.179688 18.3785 0.539062C18.6456 0.898438 18.7235 1.29375 18.6122 1.725L17.6774 5.75H20.6488C21.094 5.75 21.4501 5.93544 21.7172 6.30631C21.9843 6.67815 22.0622 7.09167 21.9509 7.54688C21.8841 7.88229 21.7283 8.14583 21.4835 8.3375C21.2386 8.52917 20.9604 8.625 20.6488 8.625H17.0096L15.6742 14.375H19.3133C19.7585 14.375 20.1146 14.5604 20.3817 14.9313C20.6488 15.3031 20.7267 15.7167 20.6154 16.1719C20.5487 16.5073 20.3928 16.7708 20.148 16.9625C19.9032 17.1542 19.6249 17.25 19.3133 17.25H15.0064L13.9047 21.9578C13.8379 22.2693 13.6932 22.5208 13.4706 22.7125C13.2481 22.9042 12.981 23 12.6693 23C12.2464 23 11.9014 22.8203 11.6344 22.4609C11.3673 22.1016 11.2894 21.7062 11.4006 21.275L12.3355 17.25H6.99357L5.89181 21.9578C5.82503 22.2693 5.68035 22.5208 5.45778 22.7125C5.2352 22.9042 4.9681 23 4.65649 23ZM7.66131 14.375H13.0032L14.3387 8.625H8.99679L7.66131 14.375Z"
                                    fill="black" />
                            </svg>
                        </div>
                        }
                        @default {
                        <div class="svg-container">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                                style="fill: rgba(0, 0, 0, 1);">
                                <path
                                    d="M20 12c0-1.103-.897-2-2-2h-1V7c0-2.757-2.243-5-5-5S7 4.243 7 7v3H6c-1.103 0-2 .897-2 2v8c0 1.103.897 2 2 2h12c1.103 0 2-.897 2-2v-8zM9 7c0-1.654 1.346-3 3-3s3 1.346 3 3v3H9V7z">
                                </path>
                            </svg>
                        </div>
                        }
                        }
                    }
                    <span>{{channel['name']}}</span>   
                </div> 
            </div>
        </div>
            
    </div>
    
    <div class="profil-menu-container" (click)="switchDropDown();">
        @if(authService.user) {
        <span>{{ authService.user.name }}</span>
        <div class="avatar-container">
            @if(account) {
            <app-avatar [accountId]="account.id" [hideStatus]="false"></app-avatar>
            }
        </div>
        }
        <svg class="arrow-down-icon" xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30"
            fill="none">
            <mask id="mask0_23146_1030" style="mask-type:alpha" maskUnits="userSpaceOnUse" x="0" y="0" width="30"
                height="30">
                <rect width="30" height="30" fill="#D9D9D9" />
            </mask>
            <g mask="url(#mask0_23146_1030)">
                <path
                    d="M15 18.7188C14.8333 18.7188 14.6721 18.6875 14.5162 18.625C14.3596 18.5625 14.2292 18.4792 14.125 18.375L8.375 12.625C8.14583 12.3958 8.03125 12.1042 8.03125 11.75C8.03125 11.3958 8.14583 11.1042 8.375 10.875C8.60417 10.6458 8.89583 10.5312 9.25 10.5312C9.60417 10.5312 9.89583 10.6458 10.125 10.875L15 15.75L19.875 10.875C20.1042 10.6458 20.3958 10.5312 20.75 10.5312C21.1042 10.5312 21.3958 10.6458 21.625 10.875C21.8542 11.1042 21.9688 11.3958 21.9688 11.75C21.9688 12.1042 21.8542 12.3958 21.625 12.625L15.875 18.375C15.75 18.5 15.6146 18.5883 15.4688 18.64C15.3229 18.6925 15.1667 18.7188 15 18.7188Z"
                    fill="black" />
            </g>
        </svg>
    </div>
    <div class="dropDown" *ngIf="dropDown">
        <div>
            <div class="closeline"><div (click)="closeDropDown()"></div></div>
            <span (click)="openProfileView()"><svg width="26" height="26" viewBox="0 0 26 26" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M5.3125 19.375C6.375 18.5625 7.5625 17.9217 8.875 17.4525C10.1875 16.9842 11.5625 16.75 13 16.75C14.4375 16.75 15.8125 16.9842 17.125 17.4525C18.4375 17.9217 19.625 18.5625 20.6875 19.375C21.4167 18.5208 21.9846 17.5521 22.3913 16.4688C22.7971 15.3854 23 14.2292 23 13C23 10.2292 22.0263 7.86958 20.0788 5.92125C18.1304 3.97375 15.7708 3 13 3C10.2292 3 7.87 3.97375 5.9225 5.92125C3.97417 7.86958 3 10.2292 3 13C3 14.2292 3.20333 15.3854 3.61 16.4688C4.01583 17.5521 4.58333 18.5208 5.3125 19.375ZM13 14.25C11.7708 14.25 10.7342 13.8283 9.89 12.985C9.04667 12.1408 8.625 11.1042 8.625 9.875C8.625 8.64583 9.04667 7.60917 9.89 6.765C10.7342 5.92167 11.7708 5.5 13 5.5C14.2292 5.5 15.2658 5.92167 16.11 6.765C16.9533 7.60917 17.375 8.64583 17.375 9.875C17.375 11.1042 16.9533 12.1408 16.11 12.985C15.2658 13.8283 14.2292 14.25 13 14.25ZM13 25.5C11.2708 25.5 9.64583 25.1717 8.125 24.515C6.60417 23.8592 5.28125 22.9688 4.15625 21.8438C3.03125 20.7188 2.14083 19.3958 1.485 17.875C0.828333 16.3542 0.5 14.7292 0.5 13C0.5 11.2708 0.828333 9.64583 1.485 8.125C2.14083 6.60417 3.03125 5.28125 4.15625 4.15625C5.28125 3.03125 6.60417 2.14042 8.125 1.48375C9.64583 0.827917 11.2708 0.5 13 0.5C14.7292 0.5 16.3542 0.827917 17.875 1.48375C19.3958 2.14042 20.7188 3.03125 21.8438 4.15625C22.9688 5.28125 23.8592 6.60417 24.515 8.125C25.1717 9.64583 25.5 11.2708 25.5 13C25.5 14.7292 25.1717 16.3542 24.515 17.875C23.8592 19.3958 22.9688 20.7188 21.8438 21.8438C20.7188 22.9688 19.3958 23.8592 17.875 24.515C16.3542 25.1717 14.7292 25.5 13 25.5ZM13 23C14.1042 23 15.1458 22.8388 16.125 22.5163C17.1042 22.1929 18 21.7292 18.8125 21.125C18 20.5208 17.1042 20.0571 16.125 19.7337C15.1458 19.4112 14.1042 19.25 13 19.25C11.8958 19.25 10.8542 19.4112 9.875 19.7337C8.89583 20.0571 8 20.5208 7.1875 21.125C8 21.7292 8.89583 22.1929 9.875 22.5163C10.8542 22.8388 11.8958 23 13 23ZM13 11.75C13.5417 11.75 13.9896 11.5729 14.3438 11.2188C14.6979 10.8646 14.875 10.4167 14.875 9.875C14.875 9.33333 14.6979 8.88542 14.3438 8.53125C13.9896 8.17708 13.5417 8 13 8C12.4583 8 12.0104 8.17708 11.6562 8.53125C11.3021 8.88542 11.125 9.33333 11.125 9.875C11.125 10.4167 11.3021 10.8646 11.6562 11.2188C12.0104 11.5729 12.4583 11.75 13 11.75Z" fill="black"/>
                </svg>
                 Profile</span>
            <span (click)="logOut()" class="hoverSpan"><svg width="30" height="30" viewBox="0 0 30 30" fill="none" xmlns="http://www.w3.org/2000/svg">
                <mask id="mask0_28764_1089" style="mask-type:alpha" maskUnits="userSpaceOnUse" x="0" y="0" width="30" height="30">
                <rect width="30" height="30" fill="#D9D9D9"/>
                </mask>
                <g mask="url(#mask0_28764_1089)">
                <path d="M19.1562 20.3438C18.9271 20.0729 18.8125 19.7654 18.8125 19.4212C18.8125 19.0779 18.9271 18.7917 19.1562 18.5625L21.4687 16.25H12.5C12.1458 16.25 11.8492 16.13 11.61 15.89C11.37 15.6508 11.25 15.3542 11.25 15C11.25 14.6458 11.37 14.3487 11.61 14.1087C11.8492 13.8696 12.1458 13.75 12.5 13.75H21.4687L19.1562 11.4375C18.9062 11.1875 18.7812 10.8908 18.7812 10.5475C18.7812 10.2033 18.9062 9.90625 19.1562 9.65625C19.3854 9.40625 19.6721 9.28125 20.0162 9.28125C20.3596 9.28125 20.6458 9.39583 20.875 9.625L25.375 14.125C25.5 14.25 25.5887 14.3854 25.6412 14.5312C25.6929 14.6771 25.7187 14.8333 25.7187 15C25.7187 15.1667 25.6929 15.3229 25.6412 15.4688C25.5887 15.6146 25.5 15.75 25.375 15.875L20.875 20.375C20.6042 20.6458 20.3075 20.7654 19.985 20.7337C19.6617 20.7029 19.3854 20.5729 19.1562 20.3438ZM6.25 26.25C5.5625 26.25 4.97375 26.0054 4.48375 25.5163C3.99458 25.0263 3.75 24.4375 3.75 23.75V6.25C3.75 5.5625 3.99458 4.97375 4.48375 4.48375C4.97375 3.99458 5.5625 3.75 6.25 3.75H13.75C14.1042 3.75 14.4012 3.86958 14.6412 4.10875C14.8804 4.34875 15 4.64583 15 5C15 5.35417 14.8804 5.65083 14.6412 5.89C14.4012 6.13 14.1042 6.25 13.75 6.25H6.25V23.75H13.75C14.1042 23.75 14.4012 23.87 14.6412 24.11C14.8804 24.3492 15 24.6458 15 25C15 25.3542 14.8804 25.6508 14.6412 25.89C14.4012 26.13 14.1042 26.25 13.75 26.25H6.25Z" fill="black"/>
                </g>
                </svg>Log out</span>
        </div>

    </div>
    <div *ngIf="profileView" class="dropDownProfile">
        <app-profile-view></app-profile-view>
    </div>
</header>