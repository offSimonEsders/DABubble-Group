<header>
    <div class="Mobilelogos">
        <img *ngIf="!this.chatService.swichPicture" class="logo" src="../../assets/img/daBubbleLogo.png" alt="Hier ist das Logo von DaBubble">
        <app-nav-head *ngIf="this.chatService.swichPicture" class="logo"></app-nav-head>
    </div>
    <div class="Destoplogos">
        <img class="logo" src="../../assets/img/daBubbleLogo.png" alt="Hier ist das Logo von DaBubble">
    </div>
    
    <div class="searchContainer">
        <div class="searchbar">
            <input id="searchInputField"
            class="input-field"
            type="text"
            placeholder="Code learning durchsuchen"
            (input)="onSearch($event)">
            <img src="../../assets/img/searchIcon.png" alt="Hier ist ein Lupen-Icon">    
        </div>
        <div class="searchResults" *ngIf="showResults">
            <div *ngIf="foundUsers.length > 0" >
                <h3>Users:</h3>
                <div *ngFor="let user of foundUsers" class="foundContent" (click)="openChat('chats', user ['accountId'])" >
                    <app-avatar [accountId]="user['id']" [hideStatus]="false"></app-avatar>
                    <span>{{user['name']}}</span>
                </div> 
            </div>
            <div *ngIf="foundChannels.length > 0" >
                <h3>Channels:</h3>
                <div *ngFor="let channel of foundChannels" class="foundContent" (click)="openChannel('channels', channel['id'])">
                    @if(channel) {
                        @switch (channel['publicStatus']) {
                        @case (true) {
                        <div class="svg-container">
                            <svg xmlns="http://www.w3.org/2000/svg" width="22" height="23" viewBox="0 0 22 23" fill="none">
                                <path
                                    d="M4.65649 23C4.23359 23 3.88859 22.8203 3.6215 22.4609C3.3544 22.1016 3.2765 21.7062 3.38779 21.275L4.32262 17.25H1.35119C0.906029 17.25 0.549902 17.0646 0.282807 16.6937C0.0157114 16.3219 -0.0621913 15.9083 0.0490984 15.4531C0.115872 15.1177 0.271678 14.8542 0.516515 14.6625C0.761352 14.4708 1.03958 14.375 1.35119 14.375H4.99036L6.32583 8.625H2.68666C2.2415 8.625 1.88538 8.43956 1.61828 8.06869C1.35119 7.69685 1.27328 7.28333 1.38457 6.82812C1.45135 6.49271 1.60715 6.22917 1.85199 6.0375C2.09683 5.84583 2.37505 5.75 2.68666 5.75H6.99357L8.09534 1.04219C8.16211 0.730729 8.30679 0.479166 8.52937 0.2875C8.75195 0.095833 9.01904 0 9.33066 0C9.75356 0 10.0986 0.179688 10.3656 0.539062C10.6327 0.898438 10.7106 1.29375 10.5994 1.725L9.66452 5.75H15.0064L16.1082 1.04219C16.175 0.730729 16.3196 0.479166 16.5422 0.2875C16.7648 0.095833 17.0319 0 17.3435 0C17.7664 0 18.1114 0.179688 18.3785 0.539062C18.6456 0.898438 18.7235 1.29375 18.6122 1.725L17.6774 5.75H20.6488C21.094 5.75 21.4501 5.93544 21.7172 6.30631C21.9843 6.67815 22.0622 7.09167 21.9509 7.54688C21.8841 7.88229 21.7283 8.14583 21.4835 8.3375C21.2386 8.52917 20.9604 8.625 20.6488 8.625H17.0096L15.6742 14.375H19.3133C19.7585 14.375 20.1146 14.5604 20.3817 14.9313C20.6488 15.3031 20.7267 15.7167 20.6154 16.1719C20.5487 16.5073 20.3928 16.7708 20.148 16.9625C19.9032 17.1542 19.6249 17.25 19.3133 17.25H15.0064L13.9047 21.9578C13.8379 22.2693 13.6932 22.5208 13.4706 22.7125C13.2481 22.9042 12.981 23 12.6693 23C12.2464 23 11.9014 22.8203 11.6344 22.4609C11.3673 22.1016 11.2894 21.7062 11.4006 21.275L12.3355 17.25H6.99357L5.89181 21.9578C5.82503 22.2693 5.68035 22.5208 5.45778 22.7125C5.2352 22.9042 4.9681 23 4.65649 23ZM7.66131 14.375H13.0032L14.3387 8.625H8.99679L7.66131 14.375Z"
                                    fill="black" />
                            </svg>
                        </div>
                        }
                        @default {
                        <div class="svg-container">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                                style="fill: rgba(0, 0, 0, 1);">
                                <path
                                    d="M20 12c0-1.103-.897-2-2-2h-1V7c0-2.757-2.243-5-5-5S7 4.243 7 7v3H6c-1.103 0-2 .897-2 2v8c0 1.103.897 2 2 2h12c1.103 0 2-.897 2-2v-8zM9 7c0-1.654 1.346-3 3-3s3 1.346 3 3v3H9V7z">
                                </path>
                            </svg>
                        </div>
                        }
                        }
                    }
                    <span>{{channel['name']}}</span>   
                </div> 
            </div>
        </div>
            
    </div>
    
    <div class="profil-menu-container" (click)="switchDropDown();">
        @if(authService.user) {
        <span>{{ authService.user.name }}</span>
        <div class="avatar-container">
            @if(account) {
            <app-avatar [accountId]="account.id" [hideStatus]="false"></app-avatar>
            }
        </div>
        }
        <svg class="arrow-down-icon" xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30"
            fill="none">
            <mask id="mask0_23146_1030" style="mask-type:alpha" maskUnits="userSpaceOnUse" x="0" y="0" width="30"
                height="30">
                <rect width="30" height="30" fill="#D9D9D9" />
            </mask>
            <g mask="url(#mask0_23146_1030)">
                <path
                    d="M15 18.7188C14.8333 18.7188 14.6721 18.6875 14.5162 18.625C14.3596 18.5625 14.2292 18.4792 14.125 18.375L8.375 12.625C8.14583 12.3958 8.03125 12.1042 8.03125 11.75C8.03125 11.3958 8.14583 11.1042 8.375 10.875C8.60417 10.6458 8.89583 10.5312 9.25 10.5312C9.60417 10.5312 9.89583 10.6458 10.125 10.875L15 15.75L19.875 10.875C20.1042 10.6458 20.3958 10.5312 20.75 10.5312C21.1042 10.5312 21.3958 10.6458 21.625 10.875C21.8542 11.1042 21.9688 11.3958 21.9688 11.75C21.9688 12.1042 21.8542 12.3958 21.625 12.625L15.875 18.375C15.75 18.5 15.6146 18.5883 15.4688 18.64C15.3229 18.6925 15.1667 18.7188 15 18.7188Z"
                    fill="black" />
            </g>
        </svg>
    </div>
    <div class="dropDown" *ngIf="dropDown">
        <div>
            <span (click)="openProfileView()">Profile</span>
            <span (click)="logOut()" class="hoverSpan">Log out</span>
        </div>

    </div>
    <div *ngIf="profileView" class="dropDownProfile">
        <app-profile-view></app-profile-view>
    </div>
</header>